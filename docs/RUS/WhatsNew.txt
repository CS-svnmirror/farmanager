                    Файловый и архивный менеджер FAR
                    ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~~
                     Что нового в последней версии
                     ~~~~~~~~~~~~~~~~~~~~~~~~~~~~~

[!] Важное замечание
[+] Нововведение
[*] Изменения
[-] Исправлена ошибка

---------------------------------------------------------------------------
FAR 1.71 alpha 4 (build 2306) (14.12.2007)
---------------------------------------------------------------------------

[!] Для устранения эффектов виртуализации в Windows Vista был дабавлен
    файл манифеста

[!] Для файловых систем FAT и FAT32 при установке атрибутов для каталога
    компоненты даты и времени ставятся только в случае если такая возможность
    поддерживается системой.

[!] Приведение PluginAPI к 64bit совместимости.

[!] API: В структуре PluginPanelItem вместо WIN32_FIND_DATA используется
    структура FAR_FIND_DATA. Вместо макроса _FAR_USE_FARFINDDATA необходимо
    использовать _FAR_USE_WIN32_FIND_DATA.

[!] Добавлен Hook, позволяющий Farx86 (32-битный) корректно работать с
    файловой системой в Win64 (отключение WOW64-fs redirection). По
    умолчанию Hook отключен и включается только на моменты загрузки
    DLL/запуска задач (для "штатной" работы 32х-битовых процессов).
    ВНИМАНИЕ: Если у кого-то был установлен плагины, занимающийся тем
              же самым, то _крайне_ желательно такой плагин удалить,
              для избежания "интерференции".

[!] TechInfo#48 по умолчанию равно 1, для Numpad5 TechInfo#48 игнорируется.

[+] Новая таблица кодировки Bulgarian MIC.

[+] API: Добавлена команда VCTL_SETMODE.

[+] Окно поиска папки (Alt-F10 в панелях и в диалоге копирования) можно
    "распахивать" с помощью F5.

[+] Добавлена поддержка колеса мыши в окне поиска папок.

[+] Macro: Help.FileName, Help.Topic, Help.SelTopic.

[+] Macro: [A|P]Panel.ColumnCount

[+] Macro: новые функции waitkey(), eval()

[+] Добавлена обработка области функциональных клавиш для диалога "Поиска папок"
    (Alt-F10)

[+] API: Для элемента DI_VTEXT добавлена обработка флагов: DIF_CENTERGROUP,
    DIF_SEPARATOR, DIF_SEPARATOR2, DIF_SHOWAMPERSAND.

[+] Добавлено правило TechInfo#75, которое позволяет управлять поведением
    стрелок влево/вправо (как на основной, так и на дополнительной клавиатуре)
    в панелях.

[+] В панелях символ '^' после буквы режима сортировки показывает включенный режим
    "Помеченные файлы вперед" ("Show selected first")

[+] API: Новый флаг DIF_NOTCVTUSERCONTROL - не конвертировать символы
    виртуального буфера элемента DI_USERCONTROL.

[+] Добавлено правило TechInfo#76, позволяющее "обходить" ограничения при
    работе с каталогами, в именах которых содержатся символы, некорректно
    преобразованные из ANSI в OEM.

[+] Добавлено правило TechInfo#77, позволяющее переопределять подписи к
    функциональным клавишам без правки LNG-файлов.

[+] Редактор нормально обрабатывает файлы, в которых строки заканчиваются
    последовательностью <CR><CR><LF>

[+] Macro: Параметр "Sequence" может так же иметь тип REG_MULTI_SZ.

[+] API: Флаг KSFLAGS_REG_MULTI_SZ.

[+] Macro: новые функции asc(), chr()

[+] Macro: Различаются Enter на основной клавиатуре и Enter на цифровой (NumEnter)

[+] Macro: Различаются Del на основной клавиатуре и Del на цифровой (NumDel).
    При включенном NumLock клавиша называется Decimal.

[+] Macro: добавлена функция Panel.SetPosIdx - позиционирование
    на файловой панели по индексу.

[+] Macro: новая функция gethotkey()

[+] API: добавлены команды DM_GETEDITPOSITION и DM_SETEDITPOSITION - управление
    позицией строки в строках ввода в диалогах.

[+] В панелях добавлена комбинация клавиш Ctrl-Shift-Numpad5:
    "Восстановить высоту панелей по умолчанию"

[+] API: Теперь при открытом DI_COMBOBOX в диалоговую процедуру посылаются
    события DN_KEY или DN_MOUSEEVENT. Управлять этим поведением можно с помощью
    сообщений DM_SETCOMBOBOXEVENT и DM_GETCOMBOBOXEVENT.

[+] Комбинация Ctrl-Shift-B в редакторе и программе просмотра показывает или
    скрывает статусную строку.

[+] Macro: Добавлена константа "MacroArea" - возвращает имя текущей макрообласти.

[+] Добавлены параметры командной строки:
    /m - при старте FAR не будет загружать макросы из реестра
    /ma - при старте ФАР не будет исполнять автостартующие макросы.

[+] Macro: Добавлена в функция n=mod(n1,n2)

[+] Macro: добавлена функция N=Menu.Select(S). Позиционирует курсор на первый
    пункт меню, содержащий подстроку S.

[+] Добавлена реакция на кнопку максимизации консольного окна. Также учитывается
    состояние консольного окна при старте (start /max, настройка в lnk и т. п.)

[+] API: Добавлен флаг DIF_NOAUTOCOMPLETE, позволяющий отключать автодополнение
    для строк ввода в диалогах.

[+] API: 2 новых события для панельного плагина: FE_GOTFOCUS и FE_KILLFOCUS

[+] API: 2 новых события для редакторного плагина: EE_GOTFOCUS и EE_KILLFOCUS

[+] Macro: добавлена функция replace()

[+] API: Легализован метод вызова плагина из панели - OPEN_FILEPANEL

[+] API: Новая команда MCMD_GETSTATE для ACTL_KEYMACRO, возвращает статус
    работы макродвижка.

[*] API: Член структуры ViewerMode.TypeWrap переименован в ViewerMode.WordWrap.

[*] Изменена логика загрузки плагинов. Модуль проверяется на принадлежность
    к плагинам до загрузки.

[*] В TechInfo #63 убрано ограничение на максимальный размер читаемых данных.

[*] На активной панели плагина не допускается создание нового файла без имени
    (по Shift-F4).

[*] При процессе удаления каталога в Корзину производится проверка наличия
    символических связей. Если символические связи присутствуют, они
    разрываются.

[*] В редакторе изменено поведение для комбинаций клавиш Ctrl-Shift-PgDn и
    Ctrl-Shift-PgUp. Теперь вертикальная позиция курсора не меняется.

[*] Macro: Изменены названия сочетаний клавиш с модификаторами:
    вместо `:` теперь `;`, а вместо `"` теперь `'`. Это относится
    ко всем комбинациям модификаторов, кроме одиночного Shift.

[*] Macro: Bof/Eof/Empty/Selected в панелях типа QView/Info/Tree возвращают
    значения для этих типов панелей. Для обычных панелей возвращают значения
    из командной строки.

[*] Editor: В диалоге перехода на указанную позицию (Alt-F8) отключено
    автодополнение.

[*] API: В диалогах сразу после DN_INITDIALOG приходит DN_GOTFOCUS для того
    элемента, у которого поле Focus=1.

[-] "Залипание" кейбара при вызове и выходе из диалога поиска папок.

[-] Падение FAR при старте, если запомненный каталог отсутствовал.

[-] Macro: fexist() всегда возвращал 1, даже если файл/каталог отсутствовал.

[-] В Windows Vista в редактор попадал мусор при нажатии на Enter.

[-] API: Неправильная ширина DIF_SEPARATOR для диалогов без рамки.

[-] FindFile: Зацикливается поиск при поиске подстроки на файле больше 2Gb.

[-] Cтрока префиксов плагина больше не ограничена 512 символами.

[-] Функция уничтожения файлов (Wipe) не работала с файлами больше 2Gb.

[-] Editor: В процессе работы функции отката (Undo) некорректно
    восстанавливались окончания строк.

[-] Editor: При удалении пустой строки или соединении двух строк при помощи Del
    или BackSpace выставлялись неправильные символы конца строки для "новой"
    строки.

[-] В некоторых случаях вместо нового файла (Shift-F4 Ctrl-Y) в редакторе
    открывался предыдущий редактируемый файл.

[-] Неправильная отрисовка окна поиска папок: Alt-F10 F1 F5 F5 Esc.

[-] Пропадало содержимое дерева папок, если процесс перечитывания каталогов
    прерывался.

[-] При копировании файла, расположенного в корне диска, уничтожалось его
    содержимое, если в качестве приемника указывался тот же диск (например,
    файл "C:\a.txt" копируем в "C:").

[-] Переименование каталогов в панели дерева папок приводило к падению FAR.

[-] Ужесточена проверка на наличие hotplug устройства. Проверяем, не ждет ли
    устройство извлечения.

[-] Метасимвол "!$!" создавал список длинных имён вместо коротких.

[-] API: Не посылался EE_CLOSE для "?New File?".

[-] API: неправильная цветовая отрисовка диалога сообщения при использование
    флага FMSG_WARNING в функции Message без кнопок.

[-] API: В обработчике DefDlgProc для события DN_BTNCLICK не учитывался флаг
    DIF_BTNNOCLOSE.

[-] API: Некорректная отрисовка элемента DI_TEXT для сочетания условий:
    DIF_CENTERTEXT + DIF_SEPARATOR + X1 не равен "-1"

[-] Зависание FAR при указании нескольких ключей ком.строки /v и /e

[-] Неправильное отображение свободного места на дисках большого объема.

[-] API: После вызова EditorControl(ECTL_SELECT) с установленным значением
    поля BlockStartLine = -1, последующий вызов ECTL_GETINFO так же возвращал
    -1 в поле BlockStartLine.

[-] Некорректно выставлялась переменная среды FARLANG.

[-] Для новых файлов не работала функция "Позиционирование на текущий файл
    без выхода" (Ctrl-F10)

[-] Убрана ошибка "переполнения" в расчетах времени/скорости при копировании

[-] Macro: Не воспринимались переменные начинающиеся с цифр (например, %3DO)

[-] Macro: Некорректная прорисовка интерфейса при вызове из макроса функции
    "Ссылки на папки".

[-] API: DM_LISTGETCURPOS возвращал неправильное значение после открытия
    ComboBox`а, навигации по списку с последующим отказом от выбора
    (нажали Esc).

[-] Macro: не работали конструкции Eof/Bof/etc в программе просмотра.

[-] Не работал автоматический скроллинг в панели быстрого просмотра.

[-] Macro: макросы, назначенные на Модификаторы+Decimal записывались, но не
    воспроизводились.

[-] В программе просмотра некорректно работал механизм истории (Mantis#0000310)

[-] API: Если плагин для списка отключал реакцию слежения за курсором мыши
    (LMRT_NEVER), то в диалоговую процедуру не приходило событие DN_MOUSECLICK
    для двойного клика мыши (Mantis#0000309)

[-] При System/UseNumPad = 0 не работала точка на цифровой клавиатуре

[-] Двойное обновление панели после команды cd any_path

[-] В редакторе после последовательности Ctrl-U Ctrl-C Ctrl-Y не работало
    повторное выделение строки и копирования в Буфер Обмена (Ctrl-C).

[-] API: некорректная отрисовка диалога после закрытия в случае, если
    фокусным элементом был комбинированный список.

[-] Macro: Если пункт меню не содержит горячую клавишу, то GetHotkey()
    возвращает "0" вместо ""

[-] Macro: $SelWord выделяет лишнее знакоместо в конце строки

[-] Macro: В панелях быстрого просмотра и информации не работали некоторые переменные:
    ItemCount, CurPos, Selected, Bof, Eof всегда 0; Empty всегда 1.

[-] Некорректно работала функция переключения языка в XLat-трансляции и макрокоманде
    $KbdSwitch.

[-] Editor: Некорректное отображение экрана редактора при выключенной опции
    "Курсор за пределами строки" ("Cursor beyond end of line")

[-] Не сохранялось значение опции "Lock editing of read-only files" в локальных
    настройках редактора (Alt-Shift-F9)

[-] В панелях в окне быстрого поиска невозможно было ввести символ ']'.

[-] Падение FAR при некорректно заданной маске (например, "*.*, ,*.*") в диалоге
    поиска файлов.

[-] API: Для элемента ".." в PluginPanelItem заполнялись только поля
    FindData.dwFileAttributes и FindData.cFileName, остальные элементы
    структуры обнулялись (Mantis#0000358).


TempPanel - build 31
~~~~~~~~~~~~~~~~~~~~

[-] Элементы файла-списка вида \\.\cdrom0 и т.д. отображаются как файлы, а не
    как каталоги.

[-] Различные исправления в диалоге конфигурации.

[-] Различные падения с [x] Any item on panel.

FARCmds - build 22
~~~~~~~~~~~~~~~~~~

[-] При отключенной опции "View/edit empty files" после команд view:filename
    или edit:filename удалялся пустой файл.

[-] Не создавался новый файл при вызове edit:filename.

[-] Дублированные горячие клавиши в диалоге настройки плагина.

[-] Некорректная обработка кавычек в командных строках, направляющих вывод
    результатов в программу просмотра и редактор.

FTP - version 2.3
~~~~~~~~~~~~~~~~~

[+] Ограниченная поддержка UTF-8 (настраивается в свойствах учётной записи).

[-] Не корректная обработка ftp-ссылок содержащих национальные символы.

[-] Не копировались файлы содержащие символ '%' с FTP сервера.

[-] Проблемы с копированием когда путь назначения являлся UNC путём.

EMenu - build 13
~~~~~~~~~~~~~~~~

[+] В некоторых случаях показывает текст для самоотрисовывающихся пунктов.

ProcList - build 134
~~~~~~~~~~~~~~~~~~~~

[+] 32-х битные процессы помечаются атрибутом "только для чтения" в Win64.

MultiArc's ZIP.FMT 1.28
~~~~~~~~~~~~~~~~~~~~~~~

[-] Более корректное опознание zip архивов.


---------------------------------------------------------------------------
FAR 1.71 alpha 3 (build 2126) (15.09.2006)
---------------------------------------------------------------------------

[!] Для файловых систем FAT и FAT32 при установке атрибутов для каталога
    компоненты даты и времени не ставятся.

[!] Macro: fexist() и fattr() теперь не работают с панелями, для работы с
    панелями добавлены новые функции panel.fexist() и panel.fattr().

[+] Добавлены метасимволы "!=\" и "!=/" для текущего пути с учетом
    символических связей.

[+] Новое правило TechInfo#74 позволяющее задавать вид заголовка консоли при
    запуске файла на исполнение.

[+] API: Добавлена новая функция FSF.snprintf.

[+] FindFile: В фильтре добавлена возможность поиска символических связей.

[*] Macro: "AltShift/" и "AltShift-" теперь вместо "AltShift?" (и "AltShift_",
    соответственно) вводятся как есть.

[*] Macro: fexist() понимает символы маски '*' и '?'.

[*] Macro: Если имя содержит символы '*' и '?', то fattr() возвращает атрибуты
    для первого найденного файлового объекта.

[*] API: ACTL_KEYMACRO::MCMD_SAVEALL теперь работает во время воспроизведения
    макроса (FARCmds: Теперь во время исполнения макроса работает команда
    "macro:save").

[-] CtrlAltShift не гасит панель в пятом режиме.

[-] Macro: Переменные ItemCount и CurPos возвращали некорректные значение для
    программы просмотра для файлов больше чем 4GB.

[-] Некорректная обработка команды "CD" при наличие символа '/' в пути.

[-] Не всегда выставлялся путь пассивной панели для запуска программ под Win9x.

[-] Некорректное отображение параметров SUBST-диска в Windows 9x.

[-] Некорректная обработка смешанных путей (пути содержащие ".." и ".").

[-] После сравнения папок не перемещались вперед помеченные файлы на
    пассивной панели (опция "Помеченные файлы вперед" для панели включена).

[-] Macro: Игнорировались имена переменных, начинающихся с подчеркивания.

[-] Macro: [A|P]Panel.UNCPath возвращали в конце пути символ '\'.

---------------------------------------------------------------------------
FAR 1.71 alpha 2 (build 2112) (29.06.2006)
---------------------------------------------------------------------------

[!] Macro: Теперь Far.Title возвращает полный заголовок консоли.

[+] В настройки диалогов добавлена опция "Del удаляет блоки в строках ввода".

[+] Возможность пропустить ошибки в процессе создания папок (F7) при
    включенной опции "Обрабатывать несколько имен папок".

[+] Добавлено правило TechInfo#73, позволяющее задавать расширения для
    пакетных файлов.

[*] Macro:  Title в редакторе и программе просмотра возвращает ту информацию о
    заголовке, что написана в статусной строке.

[-] Неверное выделение найденного в программе просмотра.

[-] Неверная сортировка строк, различающихся только длиной при выборе режима
    "числовая сортировка".

[-] Быстрый просмотр неверно позиционировался после отмены поиска.

[-] В процессе поиска панель быстрого просмотра на половину перекрывала
    индикатор прогресса.

[-] Редкое падение в процессе создания папок (F7).

[-] Неправильный заголовок консоли для операции перемещения файлов/каталогов.

[-] Вместо открытия папки в проводнике (с использованием Shift-Enter)
    производилась попытка запуска одноименного файла в отдельном окне.

TempPanel - build 29
~~~~~~~~~~~~~~~~~~~~

[-] Неработоспособность режима "любой элемент в панели".

MultiArc's ARJ.FMT 1.20
~~~~~~~~~~~~~~~~~~~~~~~

[-] Некорректная обработка редкого вида ARJ архивов.

---------------------------------------------------------------------------
FAR 1.71 alpha 1 (build 2104) (25.05.2006)
---------------------------------------------------------------------------

[!] Расширен набор символов в Формате командной строки.

[!] Клавиши на цифровой клавиатуре '*' и '/' теперь называются "Multiply"
    и "Divide". В макросах, в сочетании с модификаторами, вместо символов
    будут присутствовать именно эти названия.

[+] При выборе несуществующего файла (клавишей Enter) из истории редактирования
    предлагается создать этот файл.

[+] Макро-функция "N=sleep(N)".

[+] Макро-константа "Far.Height".

[+] Макро-константа "Far.Title".

[+] Макро-константа "Title".

[+] Макро-константа "Drv.ShowPos".

[+] Макро-константа "Drv.ShowMode".

[+] Дополнительный режим показа размера дисков (Ctrl-5) в меню дисков -
    в стиле Windows Explorer. По умолчанию включен.

[+] Режим показа параметром для сетевых дисков (Ctrl-9) в меню дисков.
    По умолчанию выключен.

[+] TechInfo#72 - позволяет сохранять в истории плагиновые папки.

[+] В меню выбора дисков комбинация клавиш Shift-Del на USB-диске позволяет
    подготовить устройство для безопасного извлечения.

[+] В меню "Commands" (F9) добавлена команда "Hotplug devices list",
    которая позволяет удалять hotplug-устройства.

[*] Уточнение подсказки командной строки (для far /?).

[*] Изменен текст диалогов для уничтожения файлов (Alt-Del).

[-] Некорректная работа команд CD и CHDIR с переменными среды.

[-] Не работало правило TechInfo#8.

[-] Некорректная обработка параметров командной строки FAR, содержащих
    переменные среды и относительные пути.

[-] Падение FAR при запуске, если значение "HistoryCount" (TechInfo#52)
    меньше реального значения пунктов истории.

[-] Исправлено поведение Ctrl-Enter на несуществующих пунктах истории
    просмотра.

[-] В историю попадало имя "нового" файла ("?Новый файл?")
    (Shift-F4 Del Enter Esc).

[-] Некорректная обработка плагиновых путей в истории папок.

[-] Не работали пути вида БукваДиска: для пассивной панели при запуске программ
    в Windows9x.

[-] Некорректная обработка команд командной строки содержащих символы в не OEM
    кодировке.

[-] Macro: [A|P]Panel.UNCPath возвращали в конце символ '\'.

[-] Функция fsplit в макросах для имени файла в корне плагиновой панели
    добавляла префикс плагина.

[-] Некорректно обрабатывались Dead-клавиши.

[-] Падение FAR при изменении размера размера табуляции в процессе
    просмотра файла.

[-] Падение FAR для команды "far /e" с выставленной опцией показа часов.

[-] Некорректная прорисовка экрана после вызова функций Editor и Viewer
    с выставленным флагом ?F_IMMEDIATERETURN.

[-] ECTL_SAVEFILE в EE_READ для существующего файла приводило к не верному
    сообщению об изменение файла извне.

[-] При большой ширине консольного окна меню "Screens" (F12) могло быть
    показано некорректно.

[-] Неправильное позиционирование на каталоге с национальными символами
    в имени при исполнении команды "FAR . Shift-Enter".

MultiArc - build 181
~~~~~~~~~~~~~~~~~~~~

[-] Неправильно работало сохранение и восстановление параметров командной
    строки архиваторов в диалоге архивации.

[-] RAR.FMT: при использовании unrar.dll, ему передавался пароль в неверной
    кодировке.

Network - build 35
~~~~~~~~~~~~~~~~~~

[+] Плагин  понимает  командные   строки,  содержащие   имена   переменных
    окружения, указанные в форме %VARIABLENAME%.

[*] Косметика в диалоге ввода пароля к сетевому ресурсу.

[-] Исправлено следующее неверное поведение: когда плагин открывается из
    сетевого каталога, а затем пользователь закрывает плагин путем нажатия
    Ctrl+PgUp в списке провайдеров или другим способом пытается перейти на
    уровень выше, текущим каталогом становится опять же сетевой путь, что
    вводит пользователя в недоумение.

TempPanel - build 28
~~~~~~~~~~~~~~~~~~~~

[*] Плагин загружается в память при запуске FAR, чтобы можно
    было использовать его функции из других плагинов.


                                     [ FAR manager development group ]
