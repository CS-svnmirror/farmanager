<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN">
<html>
<head>
<title>FAR_FIND_DATA</title>
<meta http-equiv="Content-Type" Content="text/html; charset=Windows-1251">
<link rel="stylesheet" type="text/css" href="../../styles/styles.css">
<script language="javascript" src='../links.js' type="text/javascript"></script>
</head>
<body>

<h1>FAR_FIND_DATA</h1>
<div class=navbar>
<a href="../index.html">главная</a> |
<a href="../structures/index.html">структуры</a> |
<a href="../winapi/index.html">win32 структуры</a>
</div>



<div class=shortdescr>
Структура <strong>FAR_FIND_DATA</strong> описывает файловый объект на панели FAR Manager.
</div>

<pre class=syntax>
struct FAR_FIND_DATA {
  DWORD dwFileAttributes;
  FILETIME ftCreationTime;
  FILETIME ftLastAccessTime;
  FILETIME ftLastWriteTime;
  unsigned __int64 nFileSize;
  unsigned __int64 nPackSize;
  const wchar_t *lpwszFileName;
  const wchar_t *lpwszAlternateFileName;
};
</pre>

<h3>Элементы</h3>
<div class=descr>

    <div class=dfn>dwFileAttributes</div>
    <div class=dfndescr>Указывает атрибуты найденного файла. Этот элемент может быть комбинацией
    следующих значений:

       <table class="cont">
       <tr class="cont"><th class="cont" width="40%">Атрибут</th><th class="cont" width="60%">Описание</th></tr>
        <tr class="cont"><td class="cont" width="40%"><a name="FILE_ATTRIBUTE_ARCHIVE">FILE_ATTRIBUTE_ARCHIVE</a></td>
        <td class="cont" width="60%">Это архивный файл. Приложения должны использовать этот флаг
        для копирования, архивирования или удаления.</td></tr>

        <tr class="cont"><td class="cont" width="40%"><a name="FILE_ATTRIBUTE_COMPRESSED">FILE_ATTRIBUTE_COMPRESSED</a></td>
        <td class="cont" width="60%">Файл или каталог сжат. Для файла это означает, что
        все данные его сжаты, для каталога - что компрессия по умолчанию
        применяется ко всем его файлам и подкаталогам.</td></tr>

        <tr class="cont"><td class="cont" width="40%"><a name="FILE_ATTRIBUTE_DIRECTORY">FILE_ATTRIBUTE_DIRECTORY</a></td>
        <td class="cont" width="60%">Это каталог.</td></tr>

        <tr class="cont"><td class="cont" width="40%"><a name="FILE_ATTRIBUTE_ENCRYPTED">FILE_ATTRIBUTE_ENCRYPTED</a></td>
        <td class="cont" width="60%">Файл или каталог зашифрован. Для файла, это означает, что все данные в
          файле зашифрованы. Для директория, это означает, что шифрование является умолчанием для
          вновь созданных файлов и подкаталогов.</td></tr>

        <tr class="cont"><td class="cont" width="40%"><a name="FILE_ATTRIBUTE_HIDDEN">FILE_ATTRIBUTE_HIDDEN</a></td>
        <td class="cont" width="60%">Файл скрыт. Такой файл не включается в обычный листинг каталога.</td></tr>

        <tr class="cont"><td class="cont" width="40%"><a name="FILE_ATTRIBUTE_NORMAL">FILE_ATTRIBUTE_NORMAL</a></td>
        <td class="cont" width="60%">У этого файла не установлены другие атрибуты. Это значение
        корректно только при использовании без остальных флагов.</td></tr>

        <tr class="cont"><td class="cont" width="40%"><a name="FILE_ATTRIBUTE_OFFLINE">FILE_ATTRIBUTE_OFFLINE</a></td>
        <td class="cont" width="60%">Данные файла не доступны непосредственно. Означает, что реальные
        данные файла были физически перемещены на устройства хранения.</td></tr>

        <tr class="cont"><td class="cont" width="40%"><a name="FILE_ATTRIBUTE_READONLY">FILE_ATTRIBUTE_READONLY</a></td>
        <td class="cont" width="60%">Файл только для чтения. Приложения могут читать такой файл, но
        не могут записывать или удалять его.</td></tr>

        <tr class="cont"><td class="cont" width="40%"><a name="FILE_ATTRIBUTE_REPARSE_POINT">FILE_ATTRIBUTE_REPARSE_POINT</a></td>
        <td class="cont" width="60%">Каталог является символической связью.</td></tr>

        <tr class="cont"><td class="cont" width="40%"><a name="FILE_ATTRIBUTE_SPARSE_FILE">FILE_ATTRIBUTE_SPARSE_FILE</a></td>
        <td class="cont" width="60%">Файл является т.н. "Sparse file".</td></tr>

        <tr class="cont"><td class="cont" width="40%"><a name="FILE_ATTRIBUTE_SYSTEM">FILE_ATTRIBUTE_SYSTEM</a></td>
        <td class="cont" width="60%">Этот файл - часть операционной системы.</td></tr>

        <tr class="cont"><td class="cont" width="40%"><a name="FILE_ATTRIBUTE_TEMPORARY">FILE_ATTRIBUTE_TEMPORARY</a></td>
        <td class="cont" width="60%">Это временный файл. Приложения должны записывать в такой файл
         только в крайней необходимости. Большая часть данных файла
         находится в памяти и не сбрасывается на диск, так как файл будет
         удален.</td></tr>

        <tr class="cont"><td class="cont" width="40%"><a name="FILE_ATTRIBUTE_NOT_CONTENT_INDEXED">FILE_ATTRIBUTE_NOT_CONTENT_INDEXED</a></td>
        <td class="cont" width="60%">Этот файл или каталог не будут индексироваться службой индексирования.</td></tr>

        <tr class="cont"><td class="cont" width="40%"><a name="FILE_ATTRIBUTE_VIRTUAL">FILE_ATTRIBUTE_VIRTUAL</a></td>
        <td class="cont" width="60%">Этот файл - виртуальный файл.</td></tr>
       </table>
    </div>

    <div class=dfn>ftCreationTime</div>
    <div class=dfndescr>Время создания - структура <a href="../winapi/filetime.html">FILETIME</a>
    содержащая время создания файла. <a href="win32/FindFirstFile">FindFirstFile</a> и <a href="win32/FindNextFile">FindNextFile</a>
    возвращают время файла в UTC-формате.
    Эти функции устанавливают элементы FILETIME в ноль если файловая
    система, содержащая файл не поддерживает этот временной атрибут. Вы
    можете использовать функцию <a href="win32/FileTimeToLocalFileTime">FileTimeToLocalFileTime</a>
    для преобразования из UTC в локальное время и тогда использовать
    функцию <a href="win32/FileTimeToSystemTime">FileTimeToSystemTime</a> для преобразования
    локального времени в структуру <a href="../winapi/systemtime.html">SYSTEMTIME</a>
    содержащую отдельные элементы для месяца, дня, года и так далее...</div>

    <div class=dfn>ftLastAccessTime</div>
    <div class=dfndescr>Структура <a href="../winapi/filetime.html">FILETIME</a> с временем последнего
    доступа к файлу. Время хранится в UTC формате; элементы структуры
    установлены в ноль, если файловая система не поддерживает этого свойства.</div>

    <div class=dfn>ftLastWriteTime</div>
    <div class=dfndescr>Структура <a href="../winapi/filetime.html">FILETIME</a> с временем последней
    записи в файл. Время хранится в UTC формате; элементы структуры
    установлены в ноль, если файловая система не поддерживает этого свойства.</div>

    <div class=dfn>nFileSize</div>
    <div class=dfndescr>Размера файла в байтах.</div>

    <div class=dfn>nPackSize</div>
    <div class=dfndescr>Размера сжатого файла в байтах.</div>

    <div class=dfn>lpwszFileName</div>
    <div class=dfndescr>Указатель на строку с именем файла. </div>

    <div class=dfn>lpwszAlternateFileName</div>
    <div class=dfndescr>Указатель на строку с альтернативным именем файла. </div>

</div>

<h3>Замечания</h3>
<div class=descr>
<ol>
<li>При запросе файлового объекта с панели FAR'а - если файл имеет длинное имя, то
полное имя возвращается в элементе <var>lpwszFileName</var>, а усеченная версия 
формата 8.3 сохраняется в <var>lpwszAlternateFileName</var>.
Иначе <var>lpwszAlternateFileName</var> пусто.
<li>При запросе файлового объекта с панели плагина - <var>lpwszAlternateFileName</var> 
может содержать любую строку сформированную плагином, т.е. за содержимое отвечает 
опрашиваемый плагин.
<li>Не все файловые системы позволяют хранить время создания файла и
  последнего доступа к нему, и не все системы хранят их одинаково. Например, в
  файловой системе FAT под Windows NT время создания файла записывается с
  разрешением 10 миллисекунд, время последней модификации - 2 секунды, а время
  доступа - 1 день (то есть, фактически, записывается только дата доступа). На
  файловой системе NTFS время доступа имеет разрешение 1 час.
</ol>
</div>
<br>

<div class=see>Смотрите также:</div><div class=seecont>
<a href="../winapi/win32_find_data.html">WIN32_FIND_DATA</a> |
<a href="../winapi/filetime.html">FILETIME</a> |
</div>

</body>
</html>
